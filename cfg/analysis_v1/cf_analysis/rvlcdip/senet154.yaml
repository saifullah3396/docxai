# @package _global_
defaults:
 - /args/analyzer_args: default
 - override /args/model_args: timm_model
 - override /args/data_args: rvlcdip_224

args:
  model_args:
    checkpoint_state_dict_key: model
    config:
      model_type: senet154
  data_args:
    data_loader_args:
      per_device_train_batch_size: 16
      per_device_eval_batch_size: 16
      pin_memory: True
  analyzer_args:
    model_checkpoints:
      - ['baseline', '/netscratch/saifullah/resources/pretrained_models/rvlcdip/senet154.pt']
    tasks:
      # evaluation:
      #   task_type: generate_metrics
      #   task_config:
      #     metrics:
      #       - accuracy
      counterfactual_analysis:
        task_type: image_attr_analysis
        task_config:
          methods:
            deepshap:
              batch_size: 64
              internal_batch_size: 64
              normalize: False
          evaluators:
            attr_map:
              visualize: False
              overwrite: False
            feature_perturbation:
              overwrite: False
              importance_orders: ['descending']
              perturbation_kwargs:
                attr_map_grid_cell_size: 4
                attr_map_reduce_fn: mean
                max_perturbation_percentage: 1.0
                perturbation_step_size: 4
                eval_batch_size: 32
                force_gray_to_rgb: True
                normalize_attributions:
                terminate_on_misclassification: True
                attack_type: black_white_switch
                attack_config: {}